
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Final Frontier: Câmera e controle</title>
    <meta name="description" content="">

    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="shortcut icon" href="../favicon.ico">

    <link rel="stylesheet" type="text/css" href="../assets/css/screen.css?v=65fd095c43">
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic%7COpen+Sans:700,400">

    <link rel="canonical" href="http://gamedeveloper.com.br/final-frontier-camera-e-controle/">
    <meta name="referrer" content="origin">
    
    <meta property="og:site_name" content="Game Developer">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Final Frontier: Câmera e controle">
    <meta property="og:description" content="No último post deste série sobre o desenvolvimento do meu jogo Final Frontier falei sobre o novo skybox e melhorei a destruição da caixa que representa um asteroide. Desta vez trabalhei em melhorias para a câmera e o controle da...">
    <meta property="og:url" content="http://gamedeveloper.com.br/final-frontier-camera-e-controle/">
    <meta property="og:image" content="http://gamedeveloper.com.br/content/images/2016/08/capa-ff-camera-big.jpg">
    <meta property="article:published_time" content="2016-08-03T15:36:40.167Z">
    <meta property="article:modified_time" content="2016-08-03T15:42:29.884Z">
    <meta property="article:tag" content="final frontier">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Final Frontier: Câmera e controle">
    <meta name="twitter:description" content="No último post deste série sobre o desenvolvimento do meu jogo Final Frontier falei sobre o novo skybox e melhorei a destruição da caixa que representa um asteroide. Desta vez trabalhei em melhorias para a câmera e o controle da...">
    <meta name="twitter:url" content="http://gamedeveloper.com.br/final-frontier-camera-e-controle/">
    <meta name="twitter:image:src" content="http://gamedeveloper.com.br/content/images/2016/08/capa-ff-camera-big.jpg">
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "Game Developer",
    "author": {
        "@type": "Person",
        "name": "Bruno Cicanci",
        "image": "http://gamedeveloper.com.br/content/images/2016/02/cicanci.jpg",
        "url": "http://gamedeveloper.com.br/author/bruno",
        "sameAs": "http://cicanci.com",
        "description": null
    },
    "headline": "Final Frontier: Câmera e controle",
    "url": "http://gamedeveloper.com.br/final-frontier-camera-e-controle/",
    "datePublished": "2016-08-03T15:36:40.167Z",
    "dateModified": "2016-08-03T15:42:29.884Z",
    "image": "http://gamedeveloper.com.br/content/images/2016/08/capa-ff-camera-big.jpg",
    "keywords": "final frontier",
    "description": "No último post deste série sobre o desenvolvimento do meu jogo Final Frontier falei sobre o novo skybox e melhorei a destruição da caixa que representa um asteroide. Desta vez trabalhei em melhorias para a câmera e o controle da..."
}
    </script>

    <meta name="generator" content="Ghost 0.7">
    <link rel="alternate" type="application/rss+xml" title="Game Developer" href="http://gamedeveloper.com.br/rss/">
</head>
<body class="post-template tag-final-frontier nav-closed">

    <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="index.html#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
            <li class="nav-como-comear" role="presentation"><a href="http://gamedeveloper.com.br/tag/como-programar-jogos">Como Começar</a></li>
            <li class="nav-game-dev" role="presentation"><a href="http://gamedeveloper.com.br/tag/game-dev">Game Dev</a></li>
            <li class="nav-livros" role="presentation"><a href="http://gamedeveloper.com.br/tag/livros">Livros</a></li>
            <li class="nav-meus-projetos" role="presentation"><a href="http://gamedeveloper.com.br/tag/meus-projetos">Meus Projetos</a></li>
            <li class="nav-final-frontier" role="presentation"><a href="http://gamedeveloper.com.br/tag/final-frontier">Final Frontier</a></li>
            <li class="nav-ludum-dare" role="presentation"><a href="http://gamedeveloper.com.br/tag/ludum-dare">Ludum Dare</a></li>
            <li class="nav-portfolio" role="presentation"><a href="http://cicanci.com">Portfolio</a></li>
            <li class="nav-sobre" role="presentation"><a href="http://gamedeveloper.com.br/sobre">Sobre</a></li>
    </ul>
    <a class="subscribe-button icon-feed" href="http://gamedeveloper.com.br/rss/">Subscribe</a>
</div>
<span class="nav-cover"></span>


    <div class="site-wrapper">

        


<header class="main-header post-head " style="background-image: url(../content/images/2016/08/capa-ff-camera-big.jpg)">
    <nav class="main-nav overlay clearfix">
        <a class="blog-logo" href="http://gamedeveloper.com.br"><img src="../content/images/2016/02/icone.png" alt="Game Developer"></a>
            <a class="menu-button icon-menu" href="index.html#"><span class="word">Menu</span></a>
    </nav>
</header>

<main class="content" role="main">
    <article class="post tag-final-frontier">

        <header class="post-header">
            <h1 class="post-title">Final Frontier: Câmera e controle</h1>
            <section class="post-meta">
                <time class="post-date" datetime="2016-08-03">03 August 2016</time>  on <a href="../tag/final-frontier/">final frontier</a>
            </section>
        </header>

        <section class="post-content">
            <p>No último <a href="http://gamedeveloper.com.br/final-frontier-skybox-e-mais-destruicao/">post</a> deste série sobre o desenvolvimento do meu jogo <a href="http://gamedeveloper.com.br/tag/final-frontier/">Final Frontier</a> falei sobre o novo skybox e melhorei a destruição da caixa que representa um asteroide. Desta vez trabalhei em melhorias para a câmera e o controle da nave, além de alterar novamente o skybox e adicionar um planeta.</p>

<p><strong>Um planeta na galáxia</strong></p>

<p>Um skybox adiciona detalhes incríveis ao jogo, e muitas vezes o jogador não repara na arte que está acima de suas cabeças. O mapa da Lua no jogo <a href="https://www.destinythegame.com/">Destiny</a> tem um skybox incrível, com a Terra e a ISS destruída em destaque no céu. </p>

<p>Eu decidi mudar o skybox para outra opção do mesmo asset pack, desta vez com uma névoa verde que adiciona mais detalhes. Também adicionei um novo asset pack gratuito chamado <a href="https://www.assetstore.unity3d.com/en/#!/content/38913">Vast Outer Space</a>, que contém modelos de planetas, asteroides e algumas partículas. Adicionei o planeta abaixo, ele parece próximo mas está bem longe e aumentei o modelo 1000 vezes. Também alterei o <code>Clipping Planes</code> da câmera, aumentando o <code>Far</code> para 10000, assim o planeta aparece ao fundo mesmo estando bem longe. </p>

<p><img src="../content/images/2016/08/planeta-novo.jpg" alt=""></p>

<p><strong>Pilotando a nave</strong></p>

<p>Até então o controle da nave era algo temporário, até mesmo para um quase protótipo. Decidi pesquisar como eu gostaria que o controle da minha nave fosse, e usei como referência alguns jogos que gostava de jogar no Nintendo 64 e Playstation 2. Estava em dúvida entre: <a href="https://www.youtube.com/watch?v=GhQp8le67Xo">Star Fox 64</a>, onde a a câmera fica fixa seguindo a nave; <a href="https://www.youtube.com/watch?v=V0zjmj4rf3U">Star Wars Rogue Squadron</a>, onde o jogador tem mais liberdade porém com variação de zoom na nave; Star Wars Starfighter (video abaixo), onde encontrei a melhor referência para o que eu quero fazer no Final Frontier.</p>

<iframe width="640" height="360" src="https://www.youtube.com/embed/fv4e_vvwY6c" frameborder="0" allowfullscreen></iframe>

<p>Eu poderia modificar o código que fiz para a movimentação da nave, adicionando ainda mais linhas de código, mas decidi pesquisar outras maneiras de controlar a nave. Mesmo sendo um código temporário, muitas linhas de código podem dificultar implementar novas features, portanto decidi melhorar esta parte do código. Usei como referência o video abaixo, que ensina a fazer um jogo simples de pilotar aviões.</p>

<iframe width="640" height="360" src="https://www.youtube.com/embed/lCulq9J0Y9E" frameborder="0" allowfullscreen></iframe>

<p>O resultado final, que foi uma mistura do que eu tinha feito com novas coisas do video acima, ficou bem melhor do que eu esperava. Além dos direcionais do teclado agora também é possível controlar usando um controle conectado ao computador, testei com o Xbox 360 Controller for Windows e o Steam Controller. Para deixar o tiro mais simples e reduzir uma verificação no código adicionei o botão <code>space</code> como um trigger para o botão <code>Fire1</code> no <code>Input Manager</code> (Edit &gt; Project Settings &gt; Input).</p>

<p><img src="../content/images/2016/08/input-manager.jpg" alt=""></p>

<p><strong>Câmera</strong></p>

<p>Na versão anterior do controle da nave a câmera estava dentro do prefab da nave, o que dava a impressão de uma câmera dura seguindo a nave. Como alterei o controle, foi natural também adaptar a câmera para esta nova situação. Decidi tentar usar o <a href="https://docs.unity3d.com/ScriptReference/Transform.LookAt.html">LookAt</a> como é mostrado no video acima, mas não funcionou muito bem no meu caso, pois quando a nave dava um loop a câmera girava e ficava de cabeça para baixo.</p>

<p><img src="../content/images/2016/08/nave-erro-camera.jpg" alt=""></p>

<p>Meu erro foi assumir que tudo do video acima funcionaria no meu caso, porém a câmera tem um comportamento diferente, então removi o <code>LookAt</code> e fiz a rotação da câmera ser a mesma da nave, o que ficou exatamente como eu queria. Ajustei a distância da câmera adicionando um offset no script, assim ela ficou um pouco mais afastada, além de dar um efeito legal ao rodar o jogo (a nave sai de trás da câmera e vai para o local do offset).</p>

<p><img src="../content/images/2016/08/ff-camera.jpg" alt=""></p>

<p><strong>Próximos passos</strong></p>

<p>Agora que a movimentação da nave está melhor vou começar a trabalhar em uma mira na tela, para o jogador saber onde está atirando, e vou substituir a caixa branca por um modelo de asteroide. Provavelmente vou dar uma pesquisada em algum efeito de partícula para a nave e os tiros, substituindo as bolas brancas por algo que faça mais sentido ser atirado por uma nave no espaço.</p>

<p>O andamento do projeto pode ser conferido no <a href="https://github.com/cicanci/game-unity-ff">GitHub</a> e neste <a href="https://github.com/cicanci/game-unity-ff/tree/3e8ab71d0ae3410b50dac9e7873c48aa0e0e0b4a">link</a> você pode ver as alterações no projeto até este post. Todos os posts desta série sobre meu projeto podem ser vistos na tag <a href="http://gamedeveloper.com.br/tag/final-frontier/">Final Frontier</a>, e como sempre qualquer sugestão ou opinião é bem vinda!</p>
            <div id="disqus_thread"></div>
            <script>
            /**
            * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
            * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
            */
            /*
            var disqus_config = function () {
            this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable
            this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
            };
            */
            (function() { // DON'T EDIT BELOW THIS LINE
            var d = document, s = d.createElement('script');

            s.src = '//gamedeveloper.disqus.com/embed.js';

            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
            })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
        </section>

        <footer class="post-footer">


            <figure class="author-image">
                <a class="img" href="../author/bruno/" style="background-image: url(../content/images/2016/02/cicanci.jpg)"><span class="hidden">Bruno Cicanci's Picture</span></a>
            </figure>

            <section class="author">
                <h4><a href="../author/bruno/">Bruno Cicanci</a></h4>

                    <p>Read <a href="../author/bruno/">more posts</a> by this author.</p>
                <div class="author-meta">
                    
                    <span class="author-link icon-link"><a href="http://cicanci.com">http://cicanci.com</a></span>
                </div>
            </section>


            <section class="share">
                <h4>Share this post</h4>
                <a class="icon-twitter" href="https://twitter.com/intent/tweet?text=Final%20Frontier%3A%20C%C3%A2mera%20e%20controle&amp;url=http://gamedeveloper.com.br/final-frontier-camera-e-controle/" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://gamedeveloper.com.br/final-frontier-camera-e-controle/" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=http://gamedeveloper.com.br/final-frontier-camera-e-controle/" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>

        </footer>

    </article>
</main>

<aside class="read-next">
    <a class="read-next-story " style="background-image: url(../content/images/2016/08/unity3d1.jpg)" href="../melhores-praticas-2d-unity-parte-3/">
        <section class="post">
            <h2>Melhores práticas para 2D na Unity - Parte 3</h2>
            <p>Na parte 1 falei sobre dicas para reduzir o tamanho das imagens e melhores resoluções para dispositivos móveis, e…</p>
        </section>
    </a>
    <a class="read-next-story prev " style="background-image: url(../content/images/2016/07/capa-investimento.jpg)" href="../incentivos-financeiros-gamedev/">
        <section class="post">
            <h2>Incentivos financeiros para desenvolver jogos no Brasil</h2>
            <p>Este post foi uma sugestão do leitor Felipe, que inclusive me enviou boa parte do conteúdo abaixo. Ser um…</p>
        </section>
    </a>
</aside>



        <footer class="site-footer clearfix">
            <section class="copyright"><a href="http://gamedeveloper.com.br">Game Developer</a> © 2016</section>
            <section class="poweredby">Proudly published with <a href="https://ghost.org">Ghost</a></section>
        </footer>

    </div>

    <script type="text/javascript" src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-5271840-6', 'auto');
  ga('send', 'pageview');

</script>

    <script type="text/javascript" src="../assets/js/jquery.fitvids.js?v=65fd095c43"></script>
    <script type="text/javascript" src="../assets/js/index.js?v=65fd095c43"></script>

</body>
