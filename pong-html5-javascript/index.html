
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Programando PONG com HTML5 e Javascript</title>
    <meta name="description" content="">

    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="shortcut icon" href="../favicon.ico">

    <link rel="stylesheet" type="text/css" href="../assets/css/screen.css?v=e82f22f1e6">
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic%7COpen+Sans:700,400">

    <link rel="canonical" href="http://gamedeveloper.com.br/pong-html5-javascript/">
    <meta name="referrer" content="origin">
    
    <meta property="og:site_name" content="Game Developer">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Programando PONG com HTML5 e Javascript">
    <meta property="og:description" content="Esta é mais uma série de posts nova no blog para ser um complemento da “Como ser um programador de jogos”. Lá eu escrevo sobre vários aspectos, muitos teóricos, sobre a formação e aprendizagem para se tornar um programador de...">
    <meta property="og:url" content="http://gamedeveloper.com.br/pong-html5-javascript/">
    <meta property="article:published_time" content="2013-08-21T10:18:50.000Z">
    <meta property="article:modified_time" content="2016-02-16T15:04:55.208Z">
    <meta property="article:tag" content="programação">
    
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Programando PONG com HTML5 e Javascript">
    <meta name="twitter:description" content="Esta é mais uma série de posts nova no blog para ser um complemento da “Como ser um programador de jogos”. Lá eu escrevo sobre vários aspectos, muitos teóricos, sobre a formação e aprendizagem para se tornar um programador de...">
    <meta name="twitter:url" content="http://gamedeveloper.com.br/pong-html5-javascript/">
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "Game Developer",
    "author": {
        "@type": "Person",
        "name": "Bruno Cicanci",
        "image": "http://gamedeveloper.com.br/content/images/2016/02/cicanci.jpg",
        "url": "http://gamedeveloper.com.br/author/bruno",
        "sameAs": "http://cicanci.com",
        "description": null
    },
    "headline": "Programando PONG com HTML5 e Javascript",
    "url": "http://gamedeveloper.com.br/pong-html5-javascript/",
    "datePublished": "2013-08-21T10:18:50.000Z",
    "dateModified": "2016-02-16T15:04:55.208Z",
    "keywords": "programação",
    "description": "Esta é mais uma série de posts nova no blog para ser um complemento da “Como ser um programador de jogos”. Lá eu escrevo sobre vários aspectos, muitos teóricos, sobre a formação e aprendizagem para se tornar um programador de..."
}
    </script>

    <meta name="generator" content="Ghost 0.7">
    <link rel="alternate" type="application/rss+xml" title="Game Developer" href="http://gamedeveloper.com.br/rss/">
</head>
<body class="post-template tag-programacao nav-closed">

    <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="index.html#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
            <li class="nav-home" role="presentation"><a href="http://gamedeveloper.com.br/">Home</a></li>
            <li class="nav-como-comear" role="presentation"><a href="http://gamedeveloper.com.br/tag/como-programar-jogos">Como Começar</a></li>
            <li class="nav-entrevistas" role="presentation"><a href="http://gamedeveloper.com.br/tag/entrevistas">Entrevistas</a></li>
            <li class="nav-eventos" role="presentation"><a href="http://gamedeveloper.com.br/tag/eventos">Eventos</a></li>
            <li class="nav-game-design" role="presentation"><a href="http://gamedeveloper.com.br/tag/game-design">Game Design</a></li>
            <li class="nav-game-dev" role="presentation"><a href="http://gamedeveloper.com.br/tag/game-dev">Game Dev</a></li>
            <li class="nav-livros" role="presentation"><a href="http://gamedeveloper.com.br/tag/livros">Livros</a></li>
            <li class="nav-notcias" role="presentation"><a href="http://gamedeveloper.com.br/tag/noticias">Notícias</a></li>
            <li class="nav-palestras" role="presentation"><a href="http://gamedeveloper.com.br/tag/palestras">Palestras</a></li>
            <li class="nav-postmortems" role="presentation"><a href="http://gamedeveloper.com.br/tag/postmortem">Postmortems</a></li>
            <li class="nav-programao" role="presentation"><a href="http://gamedeveloper.com.br/tag/programacao">Programação</a></li>
            <li class="nav-meus-projetos" role="presentation"><a href="http://gamedeveloper.com.br/tag/meus-projetos">Meus Projetos</a></li>
            <li class="nav-contato" role="presentation"><a href="http://gamedeveloper.com.br/contato">Contato</a></li>
            <li class="nav-portfolio" role="presentation"><a href="http://cicanci.com">Portfolio</a></li>
            <li class="nav-parceiros" role="presentation"><a href="http://gamedeveloper.com.br/parceiros">Parceiros</a></li>
            <li class="nav-sobre" role="presentation"><a href="http://gamedeveloper.com.br/sobre">Sobre</a></li>
    </ul>
    <a class="subscribe-button icon-feed" href="http://gamedeveloper.com.br/rss/">Subscribe</a>
</div>
<span class="nav-cover"></span>


    <div class="site-wrapper">

        


<header class="main-header post-head no-cover">
    <nav class="main-nav  clearfix">
        <a class="blog-logo" href="http://gamedeveloper.com.br"><img src="../content/images/2016/02/icone.png" alt="Game Developer"></a>
            <a class="menu-button icon-menu" href="index.html#"><span class="word">Menu</span></a>
    </nav>
</header>

<main class="content" role="main">
    <article class="post tag-programacao">

        <header class="post-header">
            <h1 class="post-title">Programando PONG com HTML5 e Javascript</h1>
            <section class="post-meta">
                <time class="post-date" datetime="2013-08-21">21 August 2013</time>  on <a href="../tag/programacao/">programação</a>
            </section>
        </header>

        <section class="post-content">
            <p>Esta é mais uma série de posts nova no blog para ser um complemento da “Como ser um programador de jogos”. Lá eu escrevo sobre vários aspectos, muitos teóricos, sobre a formação e aprendizagem para se tornar um programador de jogos. Aqui vou mostrar programação de jogos, mas sempre com o jogo PONG.</p>

<p>Por que sempre o PONG? A ideia é mostrar desenvolvimento de jogos com diversas tecnologias e em várias plataformas, por isso sempre irei mostrar como programar o mesmo jogo, assim ficará mais clara a complexidade de uma determinada tecnologia em relação a outra. Outro motivo também é que o PONG é um jogo relativamente simples de programar, e todo mundo conhece!</p>

<p>Neste primeiro post vou mostrar como programar o PONG utilizando o canvas do HTML5 e código em Javascript. Todo o código comentado (que não é muito grande) está disponível no link no final do post. Aqui vou destacar apenas algumas partes mais importantes em relação ao canvas do HTML5 e algumas partes mais complexas do Javascript. Na conclusão deste post irei falar minha opinião sobre usar esta tecnologia para desenvolver jogos.</p>

<h1 id="introduo">Introdução</h1>

<p>O HTML5 surgiu há alguns anos com a proposta de adicionar mais interatividade à páginas web, querendo inclusive substituir o Flash como recurso multimedia. O HTML5 é um padrão que ainda está sendo implementado pelos navegadores, então alguns recursos podem ter funcionamento diferente em cada navegador, mas o básico já tem em todos.</p>

<p>Existem muitas bibliotecas javascript para desenvolver jogos, aplicativos e sites com HTML5 em javascript, mas neste post vou mostrar como fazer um PONG apenas utilizando recursos do HTML5 e Javascript “puro”, sem nada externo.</p>

<p>Para desenvolver com HTML5 e Javascript você precisa apenas de um aplicativo de bloco de notas e navegadores. Eu recomendo o <a href="http://www.sublimetext.com/2" title="Sublime">Sublime Text 2</a> para programar (tem versões para Windows e MacOSX) e pelo menos alguns navegadores mais usados para testar (Internet Explorer, Chrome, Firefox, Safari e Opera). Não precisa ter todos, mas pelo menos mais de um é recomendado.</p>

<h1 id="pong">PONG</h1>

<p><img src="http://gamedeveloper.com.br/blog/wp-content/uploads/2013/08/Screen-Shot-2013-08-21-at-10.51.33.png%20" pong alt=""></p>

<p>O código do jogo é bem simples, para começar precisamos definir o nosso canvas do HTML5. O tamanho está definido para termos uma área fixa, assim fica mais fácil fazer este exemplo, caso contrário o código ficaria bem mais complexo para fazer o jogo ser adaptável a qualquer tamanho.</p>

<canvas id="canvas" width="600" height="480"></canvas>

<p>Com isso já podemos começar a brincar com o Javascript. Não vou adicionar todo o código aqui, como a inicialização das variáveis, mas você poderá ver o código completo no link no final do post. Uma parte importante da inicialização é adicionar os eventos para receber uma notificação quando uma tecla for pressionada e quando for solta. Este exemplo é baseado nas teclados de seta pra cima e para baixo do teclado. Outro evento importante é o setInterval, que executará uma função de game loop a cada 30 frames.</p>

<p>document.addEventListener('keyup', keyUp, false); document.addEventListener('keydown', keyDown, false); setInterval(gameLoop, 30);</p>

<p>Existem três partes principais no game loop relacionados a lógica do jogo: Jogador, Oponente e a Bola. Vamos primeiro ao jogador, que é mais simples, ele se move com o movimento das teclas.</p>

<p>if (jogadorParaCima) { if (jogadorPosY &gt; 0) { jogadorPosY -= velocidadeJogador; } } else { if (jogadorPosY &lt; (canvas.height - barraHeight)) { jogadorPosY += velocidadeJogador; } }</p>

<p>O comportamento do oponente é praticamente o mesmo, a única diferença é que o seu movimento é constante, e não depende das teclas pressionadas para se deslocar para cima e para baixo, respeitando os limites da tela.</p>

<p>if (oponenteParaCima) { oponentePosY -= velocidadeOponente; if (oponentePosY = canvas.height - barraHeight) { oponenteParaCima = true; } }</p>

<p>Por fim temos a bola, que é um pouco mais complexa pois existe a verificação da colisão dos jogadores com ela, e isso faz seu deslocamento ser invertido. Este código é maior, porém suas verificações são simples para determinar se alguém encostou na bola. Se a posição da bola estiver contida na posição do jogar, a movimentação da bola é invertida, e também é aplicada uma transformação matemática aleatória para que o seu angulo ao ser rebatida seja variado.</p>

<p>if ((bolaPosX - 10) jogadorPosY) &amp;&amp; (bolaPosY - 10 &lt; jogadorPosY + barraHeight)) { bolaParaDireita = true; if (jogadorParaCima) { bolaAngulo = Math.floor(Math.random() * 10) - 9; } else { bolaAngulo = Math.floor((Math.random() * 10)); } } } else if ((bolaPosX - 10) &gt; (oponentePosX - barraWidth)) { if ((bolaPosY + 10 &gt; oponentePosY) &amp;&amp; (bolaPosY - 10 &lt; oponentePosY + barraHeight)) { bolaParaDireita = false; if (oponenteParaCima) { bolaAngulo = Math.floor(Math.random() * 10) - 9; } else { bolaAngulo = Math.floor((Math.random() * 10)); } } } if ((bolaPosY - 10 canvas.height)) { bolaAngulo = bolaAngulo * -1; } bolaPosY += bolaAngulo; if (bolaParaDireita) { bolaPosX += velocidadeBola; } else { bolaPosX -= velocidadeBola; }</p>

<p>A lógica do PONG é bem simples, e será sempre parecida em todos os posts desta série, sendo a única diferença a tecnologia utilizada. Outro detalhe importante neste post é que não existem imagens para os jogadores e a bolinha, tudo foi desenhado no próprio código Javascript utilizando recursos do canvas do HTML5, como demonstrado abaixo.</p>

<p>// Jogador e Oponente context.fillRect(jogadorPosX, jogadorPosY, barraWidth, barraHeight); context.fillRect(oponentePosX, oponentePosY, barraWidth, barraHeight); // Bola context.beginPath(); context.arc(bolaPosX, bolaPosY, bolaDiametro, 0, Math.PI * 2, true); context.closePath(); context.fill();</p>

<p>Por fim, temos mais pedaços de código responsáveis por exibir o placar, desenhar as linhas e os jogadores, contar a pontuação (basicamente é só verificar se a posição da bolinha está fora do canvas), entre outros detalhes que estão comentados no código completo no link abaixo.</p>

<h3 id="cliqueaquiparabaixarocdigocompletohttpsgithubcomcicancigamehtml5pongpong"><a href="https://github.com/cicanci/game-html5-pong" title="PONG">Clique aqui para baixar o código completo!</a></h3>

<h1 id="concluso">Conclusão</h1>

<p>Pode parecer que a única novidade é a marcação <canvas>, mas por trás disso o HTML5 implementa muitas melhorias de desempenho e gráficas, além de definir melhor o padrão para desenvolvimento web. Existem bibliotecas que podem reduzir muito o código aqui mostrado, mas a ideia era mostrar como fazer apensa utilizando o que já está disponível por padrão nos navegadores.</canvas></p>

<p>A vantagem de fazer exemplos e testes com os recursos do HTML5 é que você acaba aprendendo mais do que usando direto uma biblioteca, que vai ocultar muitas dessas coisas para simplificar o seu trabalho.</p>

<p>Outra vantagem é que, por ser HTML, você pode rodar isso em qualquer coisa que tenha um navegador (PC, celulares, tablets, video games, etc). Existem muitos aplicativos mobile que são, na verdade, uma “casca” com um código que executa um HTML dentro do aplicativo.</p>

<p>Espero que tenham gostado! Estou ansioso para o próximo post desta série!</p>
            <div id="disqus_thread"></div>
            <script>
            /**
            * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
            * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
            */
            /*
            var disqus_config = function () {
            this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable
            this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
            };
            */
            (function() { // DON'T EDIT BELOW THIS LINE
            var d = document, s = d.createElement('script');

            s.src = '//gamedeveloper.disqus.com/embed.js';

            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
            })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
        </section>

        <footer class="post-footer">


            <figure class="author-image">
                <a class="img" href="../author/bruno/" style="background-image: url(../content/images/2016/02/cicanci.jpg)"><span class="hidden">Bruno Cicanci's Picture</span></a>
            </figure>

            <section class="author">
                <h4><a href="../author/bruno/">Bruno Cicanci</a></h4>

                    <p>Read <a href="../author/bruno/">more posts</a> by this author.</p>
                <div class="author-meta">
                    
                    <span class="author-link icon-link"><a href="http://cicanci.com">http://cicanci.com</a></span>
                </div>
            </section>


            <section class="share">
                <h4>Share this post</h4>
                <a class="icon-twitter" href="https://twitter.com/intent/tweet?text=Programando%20PONG%20com%20HTML5%20e%20Javascript&amp;url=http://gamedeveloper.com.br/pong-html5-javascript/" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://gamedeveloper.com.br/pong-html5-javascript/" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=http://gamedeveloper.com.br/pong-html5-javascript/" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>

        </footer>

    </article>
</main>

<aside class="read-next">
    <a class="read-next-story " style="background-image: url(../content/images/2013/08/post02.png)" href="../como-ser-um-programador-de-jogos-hello-world/">
        <section class="post">
            <h2>Como ser um programador de jogos: Hello World</h2>
            <p>No primeiro post desta serie você conheceu um pouco sobre os pré-requisitos básicos para começar a programar um jogo,…</p>
        </section>
    </a>
    <a class="read-next-story prev " style="background-image: url(../content/images/2013/08/post011.png)" href="../como-ser-um-programador-de-jogos-pre-requisitos/">
        <section class="post">
            <h2>Como ser um programador de jogos: Pré-requisitos</h2>
            <p>Essa é uma dúvida bem comum que vejo nos comentários do blog, e até recebo por email, então resolvi…</p>
        </section>
    </a>
</aside>



        <footer class="site-footer clearfix">
            <section class="copyright"><a href="http://gamedeveloper.com.br">Game Developer</a> © 2016</section>
            <section class="poweredby">Proudly published with <a href="https://ghost.org">Ghost</a></section>
        </footer>

    </div>

    <script type="text/javascript" src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-5271840-6', 'auto');
  ga('send', 'pageview');

</script>

    <script type="text/javascript" src="../assets/js/jquery.fitvids.js?v=e82f22f1e6"></script>
    <script type="text/javascript" src="../assets/js/index.js?v=e82f22f1e6"></script>

</body>
